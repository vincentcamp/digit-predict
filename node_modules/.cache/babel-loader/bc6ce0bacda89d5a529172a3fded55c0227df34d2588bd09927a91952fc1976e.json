{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const canvasRef=useRef(null);const[isDrawing,setIsDrawing]=useState(false);const[prediction,setPrediction]=useState(null);useEffect(()=>{const canvas=canvasRef.current;const context=canvas.getContext('2d');context.fillStyle='white';context.fillRect(0,0,canvas.width,canvas.height);},[]);const startDrawing=e=>{const canvas=canvasRef.current;const context=canvas.getContext('2d');context.beginPath();context.moveTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY);setIsDrawing(true);};const draw=e=>{if(!isDrawing)return;const canvas=canvasRef.current;const context=canvas.getContext('2d');context.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY);context.stroke();};const stopDrawing=()=>{setIsDrawing(false);};const clearCanvas=()=>{const canvas=canvasRef.current;const context=canvas.getContext('2d');context.fillStyle='white';context.fillRect(0,0,canvas.width,canvas.height);setPrediction(null);};const getImageData=()=>{const canvas=canvasRef.current;const context=canvas.getContext('2d');const imageData=context.getImageData(0,0,canvas.width,canvas.height);return Array.from(imageData.data).filter((_,i)=>i%4===0);};const handlePredict=async()=>{const imageData=getImageData();const response=await fetch('/api/predict',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({image:imageData})});const result=await response.json();setPrediction(result.prediction);};const handleTrain=async()=>{if(prediction===null){alert('Please predict first before training');return;}const imageData=getImageData();const response=await fetch('/api/train',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({image:imageData,label:prediction})});const result=await response.json();alert(result.status);clearCanvas();};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-4\",children:\"Digit Recognizer\"}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,width:280,height:280,onMouseDown:startDrawing,onMouseMove:draw,onMouseUp:stopDrawing,onMouseOut:stopDrawing,className:\"border-2 border-gray-300 rounded-lg shadow-md bg-white\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePredict,className:\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors\",children:\"Predict\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTrain,className:\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors\",children:\"Train\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCanvas,className:\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors\",children:\"Clear\"})]}),prediction!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-xl font-bold\",children:[\"Prediction: \",prediction]})]});};export default App;","map":{"version":3,"names":["React","useRef","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","canvasRef","isDrawing","setIsDrawing","prediction","setPrediction","canvas","current","context","getContext","fillStyle","fillRect","width","height","startDrawing","e","beginPath","moveTo","nativeEvent","offsetX","offsetY","draw","lineTo","stroke","stopDrawing","clearCanvas","getImageData","imageData","Array","from","data","filter","_","i","handlePredict","response","fetch","method","headers","body","JSON","stringify","image","result","json","handleTrain","alert","label","status","className","children","ref","onMouseDown","onMouseMove","onMouseUp","onMouseOut","onClick"],"sources":["/Users/vincent/Downloads/Numbers/src/App.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\n\nconst App = () => {\n  const canvasRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [prediction, setPrediction] = useState(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    context.fillStyle = 'white';\n    context.fillRect(0, 0, canvas.width, canvas.height);\n  }, []);\n\n  const startDrawing = (e) => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    context.beginPath();\n    context.moveTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n    setIsDrawing(true);\n  };\n\n  const draw = (e) => {\n    if (!isDrawing) return;\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    context.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n    context.stroke();\n  };\n\n  const stopDrawing = () => {\n    setIsDrawing(false);\n  };\n\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    context.fillStyle = 'white';\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    setPrediction(null);\n  };\n\n  const getImageData = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n    return Array.from(imageData.data).filter((_, i) => i % 4 === 0);\n  };\n\n  const handlePredict = async () => {\n    const imageData = getImageData();\n    const response = await fetch('/api/predict', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ image: imageData }),\n    });\n    const result = await response.json();\n    setPrediction(result.prediction);\n  };\n\n  const handleTrain = async () => {\n    if (prediction === null) {\n      alert('Please predict first before training');\n      return;\n    }\n    const imageData = getImageData();\n    const response = await fetch('/api/train', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ image: imageData, label: prediction }),\n    });\n    const result = await response.json();\n    alert(result.status);\n    clearCanvas();\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4\">\n      <h1 className=\"text-3xl font-bold mb-4\">Digit Recognizer</h1>\n      <canvas\n        ref={canvasRef}\n        width={280}\n        height={280}\n        onMouseDown={startDrawing}\n        onMouseMove={draw}\n        onMouseUp={stopDrawing}\n        onMouseOut={stopDrawing}\n        className=\"border-2 border-gray-300 rounded-lg shadow-md bg-white\"\n      />\n      <div className=\"mt-4 space-x-4\">\n        <button\n          onClick={handlePredict}\n          className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors\"\n        >\n          Predict\n        </button>\n        <button\n          onClick={handleTrain}\n          className=\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors\"\n        >\n          Train\n        </button>\n        <button\n          onClick={clearCanvas}\n          className=\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors\"\n        >\n          Clear\n        </button>\n      </div>\n      {prediction !== null && (\n        <div className=\"mt-4 text-xl font-bold\">\n          Prediction: {prediction}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}